---
- hosts: picluster
  user: cube
  gather_facts: no
  tasks:
  - name: Removing older Release
    shell: rm -rf ~/run.dh256
  - name: Create new Run Dir
    shell: mkdir ~/run.dh256
  - name: Copy New Release Over
    copy: 
       src: ../noderelease/
       dest: ~/run.dh256
       owner: cube
       mode: 0777
  - name: Compiling Launcher
    shell: gcc -o ~/run.dh256/dh256 ~/run.dh256/launcher.c
  - name: Chmod things
    shell: chmod 777 startnodes.sh stopnodes.sh bin/dh256.jar
    args:
       chdir: /home/cube/run.dh256/  
